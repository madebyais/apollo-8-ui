(function(){var n,t,e,a,i,r,o,u,c,l;l={},a={},e=function(n,t){return n.data||(n.data={}),$.ajax({type:n.method,url:n.url,data:n.data,dataType:"json",success:function(n){return t(null,n)},error:function(n,e,a){var i;return i={a:n,b:e,c:a},t(i)}})},n=function(){return l=new Vue({el:"#apollo-8-ui",delimiters:["<%","%>"],data:{applicationServices:[],applicationServicesOnline:0,applicationServicesOffline:0,nginxConfd:[],nginxSelected:null},methods:{loadAppServ:i,loadNginxConfd:r,nginxCreateSubmit:o,nginxGetSelected:u,nginxUpdate:c}})},t=function(){if($("#editor-nginx")&&$("#editor-nginx").length>0)return a=ace.edit("editor-nginx"),a.setTheme("ace/theme/monokai")},$(document).ready(function(){return n(),t(),l.loadAppServ(),l.loadNginxConfd()}),r=function(n){var t,a;return a=env.baseUrl+"/api/v1/nginx",t={method:"GET",url:a},e(t,function(n,t){return n&&alert(n.c),l._data.nginxConfd=t.data})},o=function(n){var t,a,i;return t=$("#input-nginx-confd-name").val(),i=env.baseUrl+"/api/v1/nginx/"+t+".conf",a={method:"POST",url:i},e(a,function(n,t){return n&&alert(n.c),location.reload()})},u=function(n,t){var i,r,o;return i=n.replace(".conf",""),o=env.baseUrl+"/api/v1/nginx/"+i+".conf",r={method:"GET",url:o},e(r,function(n,t){return n&&alert(n.c),$("ul#list-nginx li").removeClass("active"),$("#nginx-"+i).addClass("active"),a.setValue(t.data)})},c=function(){var n,t,i;return n=a.getValue(),i=env.baseUrl+"/api/v1/nginx/"+$("ul#list-nginx > li.active").text(),t={method:"PUT",url:i,data:{content:n}},e(t,function(n,t){return n?alert(n.b):location.reload()})},i=function(){var n;return n={method:"GET",url:env.baseUrl+"/api/v1/appserv"},e(n,function(n,t){var e,a,i,r,o,u,c,d,f;u=t.data,o=JSON.parse(u.config),d=u.netstat,f={},r=[],o.forEach(function(n){return f[n.port.toString()]=n,r.push(n.port.toString())}),i=0,a=0,d.forEach(function(n){return r.forEach(function(t){if(n=n.replace(/\s/gi," "),n.indexOf(t)>-1)return f[t].status=!0,i++})}),e=[];for(c in f)e.push(f[c]),f[c].status||a++;return l._data.applicationServices=e,l._data.applicationServicesOnline=i,l._data.applicationServicesOffline=a})}}).call(this);