(function(){var n,t,e,a,r,i,o,u,c,l;l={},a={},e=function(n,t){return n.data||(n.data={}),$.ajax({type:n.method,url:n.url,data:n.data,dataType:"json",success:function(n){return t(null,n)},error:function(n,e,a){var r;return r={a:n,b:e,c:a},t(r)}})},n=function(){return l=new Vue({el:"#apollo-8-ui",delimiters:["<%","%>"],data:{applicationServices:[],applicationServicesOnline:0,applicationServicesOffline:0,nginxConfd:[],nginxSelected:null},methods:{loadAppServ:r,loadNginxConfd:i,nginxCreateSubmit:o,nginxGetSelected:u,nginxUpdate:c}})},t=function(){return a=ace.edit("editor-nginx"),a.setTheme("ace/theme/monokai")},$(document).ready(function(){return n(),t(),l.loadAppServ(),l.loadNginxConfd()}),i=function(n){var t,a;return a=env.baseUrl+"/api/v1/nginx",t={method:"GET",url:a},e(t,function(n,t){return n&&alert(n.c),l._data.nginxConfd=t.data})},o=function(n){var t,a,r;return t=$("#input-nginx-confd-name").val(),r=env.baseUrl+"/api/v1/nginx/"+t+".conf",a={method:"POST",url:r},e(a,function(n,t){return n&&alert(n.c),location.reload()})},u=function(n,t){var r,i,o;return r=n.replace(".conf",""),o=env.baseUrl+"/api/v1/nginx/"+r+".conf",i={method:"GET",url:o},e(i,function(n,t){return n&&alert(n.c),$("ul#list-nginx li").removeClass("active"),$("#nginx-"+r).addClass("active"),a.setValue(t.data)})},c=function(){var n,t,r;return n=a.getValue(),r=env.baseUrl+"/api/v1/nginx/"+$("ul#list-nginx > li.active").text(),t={method:"PUT",url:r,data:{content:n}},e(t,function(n,t){return n?alert(n.b):location.reload()})},r=function(){var n;return n={method:"GET",url:env.baseUrl+"/api/v1/appserv"},e(n,function(n,t){var e,a,r,i,o,u,c,d,f;u=t.data,o=JSON.parse(u.config),d=u.netstat,f={},i=[],o.forEach(function(n){return f[n.port.toString()]=n,i.push(n.port.toString())}),r=0,a=0,d.forEach(function(n){return i.forEach(function(t){if(n=n.replace(/\s/gi," "),n.indexOf(t)>-1)return f[t].status=!0,r++})}),e=[];for(c in f)e.push(f[c]),f[c].status||a++;return l._data.applicationServices=e,l._data.applicationServicesOnline=r,l._data.applicationServicesOffline=a})}}).call(this);